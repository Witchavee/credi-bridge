<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credi-Bridge Test (Plan E: OCR)</title>
    <style>
        body { font-family: sans-serif; display: grid; place-items: center; min-height: 90vh; background: #f4f4f4; }
        div { background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        input[type="file"] { margin-bottom: 1rem; } 
        button { width: 100%; padding: 0.75rem; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        pre { background: #eee; padding: 1rem; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; }
    </style>
</head>
<body>
    <div>
        <h2>Credi-Bridge: Real AI (OCR) Test</h2>
        <p>ทดสอบ "อัปโหลด" (Upload) "ภาพหน้าจอ" (Screenshot) (เช่น ยอดขาย Shopee)
           ไปให้ "สมอง AI (OCR) จริง" (Real OCR AI) "อ่าน" (Read):</p>

        <input type="file" id="image-file" accept="image/png, image/jpeg">

        <button id="submit-button">วิเคราะห์ (Analyze Image)</button>

        <pre id="result-display">(ผลลัพธ์จาก AI (OCR) จริง จะแสดงที่นี่)</pre>
    </div>

    <script>
        const submitButton = document.getElementById('submit-button');
        const imageFile = document.getElementById('image-file'); 
        const resultDisplay = document.getElementById('result-display');

        submitButton.onclick = async () => {

            const file = imageFile.files[0];
            if (!file) {
                resultDisplay.textContent = 'Error: กรุณา "เลือก" (Select) "ไฟล์รูปภาพ" (Image file) "ก่อน" (first)';
                return;
            }

            const formData = new FormData();
            formData.append('imageFile', file); 

            resultDisplay.textContent = 'กำลังอัปโหลด (Uploading) และ "วิเคราะห์" (Analyzing) ภาพ... (Connecting to Huawei OCR AI...)'; 

            const response = await fetch('/api/analyze-image', {
                method: 'POST',
                body: formData 
            });

            const result = await response.json();

            resultDisplay.textContent = JSON.stringify(result, null, 2);
        };
    </script>
</body>
</html>
